#!/usr/bin/env bash

set -o errexit
set -o nounset
# set -o xtrace

version=`mix run -e 'IO.puts(Mix.Project.config()[:version])'`
echo "=> DID YOU UPDATE 'mix.exs' => version (${version})?"
echo -n "=> Ready to deploy ðŸš€ (y/n)?"
read -r answer

if [ "$answer" != "${answer#[Yy]}" ] ;then
  git tag -a ${version} -m "Release MapBot ${version}"
  git push origin --tags
  echo "=> You'll have to input you local pass for hex"
	mix hex.user whoami
	mix hex.build
	mix hex.publish
  exit 0
else
  echo "=> Sorry, no deploy will be done ðŸ˜­"
  exit 1
fi
